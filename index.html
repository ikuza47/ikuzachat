<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IkuzaChat - –ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- –®–∞–ø–∫–∞ -->
        <header class="header">
            <div class="logo">
                <img src="src/logo.png" alt="IkuzaChat Logo" class="logo-img">
                <div>
                    <h1 class="logo-title">IkuzaChat</h1>
                    <p class="logo-subtitle">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∞—à –æ–≤–µ—Ä–ª–µ–π –¥–ª—è Twitch —á–∞—Ç–∞</p>
                </div>
            </div>
            <div class="header-controls">
                <select id="langSelector" class="lang-select" onchange="changeLanguage()">
                    <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                    <option value="en">üá¨üáß English</option>
                </select>
            </div>
        </header>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="nav">
            <button class="nav-btn active" data-tab="basic">–û—Å–Ω–æ–≤–Ω–æ–µ</button>
            <button class="nav-btn" data-tab="advanced">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</button>
            <button class="nav-btn" data-tab="modules">–ú–æ–¥—É–ª–∏</button>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main">
            <!-- –í–∫–ª–∞–¥–∫–∞: –û—Å–Ω–æ–≤–Ω–æ–µ -->
            <section class="tab-content active" id="basic-tab">
                <div class="card">
                    <h2 class="card-title">–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    <div class="form-group">
                        <label class="form-label">–ò–º—è –∫–∞–Ω–∞–ª–∞</label>
                        <input type="text" id="channel" class="form-input" value="ikuza47" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∫–∞–Ω–∞–ª–∞" onchange="updateUrl()">
                        <p class="form-help">–í–≤–µ–¥–∏—Ç–µ –∏–º—è Twitch-–∫–∞–Ω–∞–ª–∞, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å—Å—è —á–∞—Ç</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–®—Ä–∏—Ñ—Ç</label>
                        <select id="fontFamily" class="form-select" onchange="handleFontChange()">
                            <option value="'Segoe UI', sans-serif">Segoe UI</option>
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="'Helvetica Neue', sans-serif">Helvetica</option>
                            <option value="'Open Sans', sans-serif">Open Sans</option>
                            <option value="'Roboto', sans-serif">Roboto</option>
                            <option value="'Inter', sans-serif">Inter</option>
                            <option value="system-ui">–°–∏—Å—Ç–µ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã</option>
                            <option value="custom">–î—Ä—É–≥–æ–π —à—Ä–∏—Ñ—Ç...</option>
                        </select>
                        <input type="text" id="customFontInput" class="form-input mt-2 hidden" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞" onchange="updateUrl()">
                        <div class="font-preview">–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞</div>
                        <p class="form-help">–í—ã–±–µ—Ä–∏—Ç–µ —à—Ä–∏—Ñ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞</label>
                        <input type="number" id="fontSize" class="form-input" value="24" min="12" max="36" onchange="updateUrl()">
                        <p class="form-help">–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ –≤ —á–∞—Ç–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö</p>
                    </div>
                </div>
            </section>

            <!-- –í–∫–ª–∞–¥–∫–∞: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ -->
            <section class="tab-content" id="advanced-tab">
                <div class="card">
                    <h2 class="card-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">–¶–≤–µ—Ç —Ç–µ–Ω–∏</label>
                            <input type="color" id="shadowColor" class="form-color" value="#000000" onchange="updateUrl()">
                            <p class="form-help">–¶–≤–µ—Ç —Ç–µ–Ω–∏ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏</p>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–†–∞–∑–º—ã—Ç–∏–µ —Ç–µ–Ω–∏</label>
                            <input type="number" id="shadowBlur" class="form-input" value="3" min="0" max="10" onchange="updateUrl()">
                            <p class="form-help">–°–∏–ª–∞ —Ä–∞–∑–º—ã—Ç–∏—è —Ç–µ–Ω–∏ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="showBadges" checked onchange="updateUrl()">
                            <span class="checkmark"></span>
                            <span class="checkbox-label">–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –±–µ–π–¥–∂–∏–∫–∏</span>
                        </label>
                        <p class="form-help">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–µ–π–¥–∂–∏–∫–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞, –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –∏ —Ç.–¥.</p>
                    </div>

                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="autoRemove" onchange="toggleTimeout()">
                            <span class="checkmark"></span>
                            <span class="checkbox-label">–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π</span>
                        </label>
                        <p class="form-help">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</p>
                    </div>

                    <div class="form-group ml-6 hidden" id="timeoutGroup">
                        <label class="form-label">–í—Ä–µ–º—è –¥–æ —É–¥–∞–ª–µ–Ω–∏—è (—Å–µ–∫)</label>
                        <input type="number" id="removeTimeout" class="form-input" value="5" min="3" max="30" onchange="updateUrl()">
                        <p class="form-help">–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</p>
                    </div>

                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="clearChatOnCommand" checked onchange="updateUrl()">
                            <span class="checkmark"></span>
                            <span class="checkbox-label">–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞</span>
                        </label>
                        <p class="form-help">–ß–∞—Ç –±—É–¥–µ—Ç –æ—á–∏—â–∞—Ç—å—Å—è –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ /clear –≤ Twitch</p>
                    </div>

                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="colonEnabled" checked onchange="updateUrl()">
                            <span class="checkmark"></span>
                            <span class="checkbox-label">–î–æ–±–∞–≤–ª—è—Ç—å –¥–≤–æ–µ—Ç–æ—á–∏–µ –ø–æ—Å–ª–µ –Ω–∏–∫–∞</span>
                        </label>
                        <p class="form-help">–î–æ–±–∞–≤–ª—è—Ç—å : –ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö</p>
                    </div>
                </div>
            </section>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ú–æ–¥—É–ª–∏ -->
            <section class="tab-content" id="modules-tab">
                <div class="card">
                    <h2 class="card-title">–ú–æ–¥—É–ª–∏</h2>
                    
                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="osuModuleToggle" onchange="toggleOsuModule()">
                            <span class="checkmark"></span>
                            <span class="checkbox-label">osu! –º–æ–¥—É–ª—å</span>
                        </label>
                        <p class="form-help">–í–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ä—Ç–∞—Ö osu! –ø–æ —Å—Å—ã–ª–∫–µ</p>
                    </div>

                    <div class="form-group ml-6 hidden" id="osuModuleSettings">
                        <label class="form-label">osu! API –∫–ª—é—á</label>
                        <input type="text" id="osuApiKey" class="form-input" placeholder="osu! API –∫–ª—é—á" onchange="updateUrl()">
                        <p class="form-help">
                            –ö–ª—é—á –æ—Ç osu! API v1 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ä—Ç–∞—Ö. 
                            <a href="#" id="osuApiLink" target="_blank" class="link">–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</a>
                        </p>
                    </div>

                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="botModuleToggle" onchange="updateUrl()">
                            <span class="checkmark"></span>
                            <span class="checkbox-label">–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–æ—Ç–æ–≤</span>
                        </label>
                        <p class="form-help">–°–∫—Ä—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤ (—Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å GitHub)</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- –§—É—Ç–µ—Ä —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∏ —Å—Å—ã–ª–∫–æ–π -->
        <footer class="footer">
            <div class="actions">
                <button class="btn btn-primary" onclick="copyUrl()">
                    <i class="fas fa-copy"></i>
                    –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
                </button>
                <button class="btn btn-secondary" onclick="resetSettings()">
                    <i class="fas fa-redo"></i>
                    –°–±—Ä–æ—Å–∏—Ç—å
                </button>
            </div>

            <div class="url-container">
                <input type="text" id="overlayUrl" class="url-input" readonly placeholder="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...">
                <button class="copy-btn" onclick="copyUrl()" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
        </footer>
    </div>

    <script>
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Å–∏—Å—Ç–µ–º—ã
        const userLang = navigator.language || navigator.userLanguage;
        let currentLang = userLang.startsWith('ru') ? 'ru' : 'en';

        // –Ø–∑—ã–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏
        const translations = {
            ru: {
                title: 'IkuzaChat - –ù–∞—Å—Ç—Ä–æ–π–∫–∏',
                logoTitle: 'IkuzaChat',
                logoSubtitle: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∞—à –æ–≤–µ—Ä–ª–µ–π –¥–ª—è Twitch —á–∞—Ç–∞',
                tabBasic: '–û—Å–Ω–æ–≤–Ω–æ–µ',
                tabAdvanced: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ',
                tabModules: '–ú–æ–¥—É–ª–∏',
                channelLabel: '–ò–º—è –∫–∞–Ω–∞–ª–∞',
                channelPlaceholder: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∫–∞–Ω–∞–ª–∞',
                channelHelp: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è Twitch-–∫–∞–Ω–∞–ª–∞, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å—Å—è —á–∞—Ç',
                fontLabel: '–®—Ä–∏—Ñ—Ç',
                fontOptionCustom: '–î—Ä—É–≥–æ–π —à—Ä–∏—Ñ—Ç...',
                fontHelp: '–í—ã–±–µ—Ä–∏—Ç–µ —à—Ä–∏—Ñ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ',
                fontSizeLabel: '–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞',
                fontSizeHelp: '–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ –≤ —á–∞—Ç–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö',
                shadowColorLabel: '–¶–≤–µ—Ç —Ç–µ–Ω–∏',
                shadowColorHelp: '–¶–≤–µ—Ç —Ç–µ–Ω–∏ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏',
                shadowBlurLabel: '–†–∞–∑–º—ã—Ç–∏–µ —Ç–µ–Ω–∏',
                shadowBlurHelp: '–°–∏–ª–∞ —Ä–∞–∑–º—ã—Ç–∏—è —Ç–µ–Ω–∏ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)',
                showBadgesLabel: '–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –±–µ–π–¥–∂–∏–∫–∏',
                showBadgesHelp: '–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–µ–π–¥–∂–∏–∫–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞, –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –∏ —Ç.–¥.',
                autoRemoveLabel: '–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π',
                autoRemoveHelp: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è',
                timeoutLabel: '–í—Ä–µ–º—è –¥–æ —É–¥–∞–ª–µ–Ω–∏—è (—Å–µ–∫)',
                timeoutHelp: '–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ',
                clearChatLabel: '–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞',
                clearChatHelp: '–ß–∞—Ç –±—É–¥–µ—Ç –æ—á–∏—â–∞—Ç—å—Å—è –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ /clear –≤ Twitch',
                colonLabel: '–î–æ–±–∞–≤–ª—è—Ç—å –¥–≤–æ–µ—Ç–æ—á–∏–µ –ø–æ—Å–ª–µ –Ω–∏–∫–∞',
                colonHelp: '–î–æ–±–∞–≤–ª—è—Ç—å : –ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö',
                osuModuleLabel: 'osu! –º–æ–¥—É–ª—å',
                osuModuleHelp: '–í–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ä—Ç–∞—Ö osu! –ø–æ —Å—Å—ã–ª–∫–µ',
                osuApiKeyLabel: 'osu! API –∫–ª—é—á',
                osuApiKeyHelp: '–ö–ª—é—á –æ—Ç osu! API v1 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ä—Ç–∞—Ö. ',
                osuApiLinkText: '–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è',
                botModuleLabel: '–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–æ—Ç–æ–≤',
                botModuleHelp: '–°–∫—Ä—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤ (—Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å GitHub)',
                copyBtn: '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É',
                resetBtn: '–°–±—Ä–æ—Å–∏—Ç—å',
                urlPlaceholder: '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...'
            },
            en: {
                title: 'IkuzaChat - Settings',
                logoTitle: 'IkuzaChat',
                logoSubtitle: 'Configure your Twitch chat overlay',
                tabBasic: 'Basic',
                tabAdvanced: 'Advanced',
                tabModules: 'Modules',
                channelLabel: 'Channel Name',
                channelPlaceholder: 'Enter channel name',
                channelHelp: 'Enter the name of the Twitch channel from which the chat will be read',
                fontLabel: 'Font',
                fontOptionCustom: 'Other font...',
                fontHelp: 'Choose a font for displaying messages in chat',
                fontSizeLabel: 'Font Size',
                fontSizeHelp: 'The size of the text in the chat in pixels',
                shadowColorLabel: 'Shadow Color',
                shadowColorHelp: 'Text shadow color for better readability',
                shadowBlurLabel: 'Shadow Blur',
                shadowBlurHelp: 'Shadow blur strength (in pixels)',
                showBadgesLabel: 'Display Badges',
                showBadgesHelp: 'Show moderator, subscriber, etc. badges',
                autoRemoveLabel: 'Auto Remove Messages',
                autoRemoveHelp: 'Automatically delete old messages',
                timeoutLabel: 'Time until deletion (sec)',
                timeoutHelp: 'How many seconds to delete the message after',
                clearChatLabel: 'Auto Clear Chat',
                clearChatHelp: 'Chat will be cleared when using /clear command in Twitch',
                colonLabel: 'Add colon after nickname',
                colonHelp: 'Add : after the username in messages',
                osuModuleLabel: 'osu! module',
                osuModuleHelp: 'Enables support for displaying osu! map info from a link',
                osuApiKeyLabel: 'osu! API key',
                osuApiKeyHelp: 'osu! API v1 key for getting beatmap info. ',
                osuApiLinkText: 'instruction',
                botModuleLabel: 'Block Bots',
                botModuleHelp: 'Hide messages from bots (list loaded from GitHub)',
                copyBtn: 'Copy Link',
                resetBtn: 'Reset',
                urlPlaceholder: 'Generated link will appear here...'
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤
        function updateTexts() {
            const t = translations[currentLang];
            document.title = t.title;
            document.querySelector('.logo-title').textContent = t.logoTitle;
            document.querySelector('.logo-subtitle').textContent = t.logoSubtitle;
            
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è
            document.querySelectorAll('.nav-btn')[0].textContent = t.tabBasic;
            document.querySelectorAll('.nav-btn')[1].textContent = t.tabAdvanced;
            document.querySelectorAll('.nav-btn')[2].textContent = t.tabModules;

            // –û—Å–Ω–æ–≤–Ω–æ–µ
            document.querySelector('#basic-tab .form-label').textContent = t.channelLabel;
            document.querySelector('#channel').placeholder = t.channelPlaceholder;
            document.querySelector('#channel + .form-help').textContent = t.channelHelp;
            
            document.querySelectorAll('.form-label')[1].textContent = t.fontLabel;
            document.querySelector('#fontFamily option[value="custom"]').textContent = t.fontOptionCustom;
            document.querySelector('#fontFamily + .form-help').textContent = t.fontHelp;
            
            document.querySelectorAll('.form-label')[2].textContent = t.fontSizeLabel;
            document.querySelectorAll('.form-help')[2].textContent = t.fontSizeHelp;

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
            document.querySelectorAll('.form-label')[3].textContent = t.shadowColorLabel;
            document.querySelectorAll('.form-help')[3].textContent = t.shadowColorHelp;
            
            document.querySelectorAll('.form-label')[4].textContent = t.shadowBlurLabel;
            document.querySelectorAll('.form-help')[4].textContent = t.shadowBlurHelp;
            
            document.querySelectorAll('.checkbox-label')[0].textContent = t.showBadgesLabel;
            document.querySelectorAll('.form-help')[5].textContent = t.showBadgesHelp;
            
            document.querySelectorAll('.checkbox-label')[1].textContent = t.autoRemoveLabel;
            document.querySelectorAll('.form-help')[6].textContent = t.autoRemoveHelp;
            
            document.querySelectorAll('.form-label')[5].textContent = t.timeoutLabel;
            document.querySelectorAll('.form-help')[7].textContent = t.timeoutHelp;
            
            document.querySelectorAll('.checkbox-label')[2].textContent = t.clearChatLabel;
            document.querySelectorAll('.form-help')[8].textContent = t.clearChatHelp;
            
            document.querySelectorAll('.checkbox-label')[3].textContent = t.colonLabel;
            document.querySelectorAll('.form-help')[9].textContent = t.colonHelp;

            // –ú–æ–¥—É–ª–∏
            document.querySelectorAll('.checkbox-label')[4].textContent = t.osuModuleLabel;
            document.querySelectorAll('.form-help')[10].textContent = t.osuModuleHelp;
            
            document.querySelectorAll('.form-label')[6].textContent = t.osuApiKeyLabel;
            const osuHelp = document.querySelectorAll('.form-help')[11];
            osuHelp.innerHTML = t.osuApiKeyHelp + `<a href="#" id="osuApiLink" target="_blank" class="link">${t.osuApiLinkText}</a>`;
            
            document.querySelectorAll('.checkbox-label')[5].textContent = t.botModuleLabel;
            document.querySelectorAll('.form-help')[12].textContent = t.botModuleHelp;

            // –ö–Ω–æ–ø–∫–∏
            document.querySelector('.btn-primary').innerHTML = `<i class="fas fa-copy"></i> ${t.copyBtn}`;
            document.querySelector('.btn-secondary').innerHTML = `<i class="fas fa-redo"></i> ${t.resetBtn}`;

            // –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
            document.querySelector('#overlayUrl').placeholder = t.urlPlaceholder;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
        function updateInstructionLink() {
            const osuApiLink = document.getElementById('osuApiLink');
            if (currentLang === 'ru') {
                osuApiLink.href = 'https://github.com/ikuza47/ikuzachat/blob/main/public/howgetosuapiRU.md';
            } else {
                osuApiLink.href = 'https://github.com/ikuza47/ikuzachat/blob/main/public/howgetosuapiEN.md';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã —è–∑—ã–∫–∞
        function changeLanguage() {
            const langSelect = document.getElementById('langSelector');
            currentLang = langSelect.value;
            updateTexts();
            updateInstructionLink();
            updateUrl();
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
                document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
                btn.classList.add('active');
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–∫–ª–∞–¥–∫—É
                const tabId = btn.getAttribute('data-tab') + '-tab';
                document.getElementById(tabId).classList.add('active');
            });
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞
        function toggleTimeout() {
            const timeoutGroup = document.getElementById('timeoutGroup');
            if (document.getElementById('autoRemove').checked) {
                timeoutGroup.classList.remove('hidden');
            } else {
                timeoutGroup.classList.add('hidden');
            }
            updateUrl();
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è osu!
        function toggleOsuModule() {
            const osuSettings = document.getElementById('osuModuleSettings');
            if (document.getElementById('osuModuleToggle').checked) {
                osuSettings.classList.remove('hidden');
            } else {
                osuSettings.classList.add('hidden');
            }
            updateUrl();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞
        function handleFontChange() {
            const fontFamily = document.getElementById('fontFamily');
            const customInput = document.getElementById('customFontInput');
            const preview = document.querySelector('.font-preview');
            
            if (fontFamily.value === 'custom') {
                customInput.classList.remove('hidden');
                preview.textContent = '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞';
            } else {
                customInput.classList.add('hidden');
                preview.textContent = '–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞';
                preview.style.fontFamily = fontFamily.value;
            }
            updateUrl();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏
        function updateUrl() {
            const channel = document.getElementById('channel').value.trim().toLowerCase();
            if (!channel) return;

            const params = new URLSearchParams();
            params.append('channel', channel);

            let fontValue = document.getElementById('fontFamily').value;
            if (fontValue === 'custom') {
                const customFont = document.getElementById('customFontInput').value.trim();
                fontValue = customFont ? `'${customFont}', sans-serif` : 'sans-serif';
            }
            params.append('font', encodeURIComponent(fontValue));
            params.append('size', document.getElementById('fontSize').value);
            params.append('shadowColor', document.getElementById('shadowColor').value.replace('#', ''));
            params.append('shadowBlur', document.getElementById('shadowBlur').value);
            params.append('showBadges', document.getElementById('showBadges').checked);
            params.append('clearChatOnCommand', document.getElementById('clearChatOnCommand').checked);
            params.append('colon', document.getElementById('colonEnabled').checked);

            if (document.getElementById('autoRemove').checked) {
                params.append('autoRemove', 'true');
                params.append('timeout', document.getElementById('removeTimeout').value || '5');
            }

            // osu!
            if (document.getElementById('osuModuleToggle').checked) {
                const osuKey = document.getElementById('osuApiKey').value.trim();
                if (osuKey) {
                    params.append('osuapi', osuKey);
                }
            }

            // bot!
            params.append('ignorebots', document.getElementById('botModuleToggle').checked);

            const url = `chat/overlay.html?${params.toString()}`;
            const fullUrl = `${window.location.origin}${window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/') + 1)}${url}`;
            document.getElementById('overlayUrl').value = fullUrl;
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏
        function copyUrl() {
            const input = document.getElementById('overlayUrl');
            input.select();
            input.setSelectionRange(0, 99999); // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            navigator.clipboard.writeText(input.value).then(() => {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                const originalText = document.querySelector('.btn-primary').innerHTML;
                document.querySelector('.btn-primary').innerHTML = '<i class="fas fa-check"></i> –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                setTimeout(() => {
                    document.querySelector('.btn-primary').innerHTML = originalText;
                }, 2000);
            }).catch(err => {
                console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É');
            });
        }

        // –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function resetSettings() {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?')) {
                document.getElementById('channel').value = 'ikuza47';
                document.getElementById('fontFamily').value = "'Segoe UI', sans-serif";
                document.getElementById('fontSize').value = '24';
                document.getElementById('shadowColor').value = '#000000';
                document.getElementById('shadowBlur').value = '3';
                document.getElementById('showBadges').checked = true;
                document.getElementById('autoRemove').checked = false;
                document.getElementById('clearChatOnCommand').checked = true;
                document.getElementById('colonEnabled').checked = true;
                document.getElementById('osuModuleToggle').checked = false;
                document.getElementById('botModuleToggle').checked = false;
                document.getElementById('osuApiKey').value = '';
                document.getElementById('customFontInput').classList.add('hidden');
                document.querySelector('.font-preview').textContent = '–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞';
                document.querySelector('.font-preview').style.fontFamily = "'Segoe UI', sans-serif";
                document.getElementById('timeoutGroup').classList.add('hidden');
                document.getElementById('osuModuleSettings').classList.add('hidden');
                document.querySelector('.nav-btn[data-tab="basic"]').click();
                updateUrl();
                alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —è–∑—ã–∫
            document.getElementById('langSelector').value = currentLang;
            updateTexts();
            updateInstructionLink();
            updateUrl();
        });
    </script>
</body>
</html>