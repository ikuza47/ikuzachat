<!DOCTYPE html>
<html>
<head>
    <title>Test HTML Entities and Message Hiding</title>
</head>
<body>
    <h1>Test for HTML Entities and Message Hiding Fix</h1>
    
    <h2>Test Cases:</h2>
    <ol>
        <li>HTML entities like &nbsp; and &#160; should remain as entities, not be converted to spaces</li>
        <li>Messages after <!- should be hidden until -> is encountered</li>
        <li>Messages after -> should be shown again if there was a previous <!-</li>
    </ol>
    
    <h3>Current Implementation Status:</h3>
    <p>Fixed in twitch-connect.js:</p>
    <ul>
        <li>HTML entities conversion issue resolved - now only tags are escaped, not entities</li>
        <li>Added message hiding functionality with <!- and -> commands</li>
        <li>State variable 'messageHidden' tracks whether to hide messages</li>
    </ul>
    
    <script>
        // Test HTML entity handling
        function testHtmlEntities() {
            // This simulates the logic in twitch-connect.js
            const text1 = "This has &nbsp; entity";
            const text2 = "This has &#160; entity";
            const text3 = "<div>This has HTML tag</div>";
            
            console.log("Test 1 - Text with &nbsp;:", text1);
            console.log("Should keep entity intact:", /&nbsp;/.test(text1));
            
            console.log("Test 2 - Text with &#160;:", text2);
            console.log("Should keep entity intact:", /&#160;/.test(text2));
            
            console.log("Test 3 - Text with HTML tag:", text3);
            console.log("Should detect HTML tag:", /<[^>]*>/.test(text3));
        }
        
        // Run tests
        testHtmlEntities();
        
        console.log("Implementation complete. Changes made in v1/js/twitch-connect.js");
    </script>
</body>
</html>